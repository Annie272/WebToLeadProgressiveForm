<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Progressive Web-to-Lead Form</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-gray-100 flex items-center justify-center min-h-screen p-6">
    <form
      action="https://test.salesforce.com/servlet/servlet.WebToLead?encoding=UTF-8&orgId=00DU7000006EuID"
      method="POST"
      class="bg-white p-8 rounded-2xl shadow-md w-full max-w-xl space-y-6"
      id="mainForm"
      autocomplete="off"
    >
      <h2 class="text-2xl font-bold text-center text-gray-800">
        Progressive Form
      </h2>

      <input type="hidden" name="oid" value="00DU7000006EuID" />
      <input
        type="hidden"
        name="recordType"
        id="recordType"
        value="012U7000003Hjv3IAC"
      />
      <input
        type="hidden"
        name="retURL"
        value="https://bennettandporter.com/"
      />
      <input type="hidden" name="status" value="New" />
      <input type="hidden" name="email" value="123@gmail.com" />
      <input type="hidden" name="phone" value="1213234567" />
      <input type="hidden" name="lead_source" value="Web Form" />

      <!-- Basic Info -->
      <div>
        <label for="first_name" class="block text-sm font-medium text-gray-700"
          >First Name</label
        >
        <input
          type="text"
          id="first_name"
          name="first_name"
          maxlength="40"
          required
          class="mt-1 w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500"
        />
      </div>
      <div>
        <label for="last_name" class="block text-sm font-medium text-gray-700"
          >Last Name</label
        >
        <input
          type="text"
          id="last_name"
          name="last_name"
          maxlength="80"
          required
          class="mt-1 w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500"
        />
      </div>
      <div>
        <label for="company" class="block text-sm font-medium text-gray-700"
          >Company</label
        >
        <input
          type="text"
          id="company"
          name="company"
          required
          class="mt-1 w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500"
        />
      </div>

      <div>
        <label
          for="00NU7000005zuNN"
          class="block text-sm font-medium text-gray-700"
          >Policy Action</label
        >
        <select
          id="00NU7000005zuNN"
          name="00NU7000005zuNN"
          class="mt-1 w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500"
        >
          <option value="">--None--</option>
          <option value="Add Vehicle">Add Vehicle</option>
          <option value="Replace Vehicle">Replace Vehicle</option>
          <option value="Remove Vehicle">Remove Vehicle</option>
          <option value="Add Driver">Add Driver</option>
          <option value="Remove Driver">Remove Driver</option>
          <option value="Update Address">Update Address</option>
          <option value="ID Card">ID Card</option>
          <option value="EOI">EOI</option>
          <option value="Billing Info">Billing Info</option>
        </select>
      </div>

      <!-- Add Vehicle Section -->
      <div
        id="addVehicleSection"
        class="hidden space-y-4 border p-4 rounded-xl bg-gray-50"
      >
        <!-- Initial Info -->
        <div id="initialInfoSection" class="space-y-4">
          <div>
            <label
              for="00NU7000005zuX3"
              class="block text-sm font-medium text-gray-700"
              >Policy Number</label
            >
            <input
              type="text"
              id="00NU7000005zuX3"
              name="00NU7000005zuX3"
              class="mt-1 w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500"
            />
          </div>
          <div>
            <label
              for="00NU7000005zsLb"
              class="block text-sm font-medium text-gray-700"
              >Agent Name</label
            >
            <input
              type="text"
              id="00NU7000005zsLb"
              name="00NU7000005zsLb"
              maxlength="100"
              class="mt-1 w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500"
            />
          </div>
          <div>
            <label
              for="00NU7000005zuLl"
              class="block text-sm font-medium text-gray-700"
              >Date to add vehicle</label
            >
            <input
              type="date"
              id="00NU7000005zuLl"
              name="00NU7000005zuLl"
              class="mt-1 w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500"
            />
          </div>
          <div>
            <label
              for="requester"
              class="block text-sm font-medium text-gray-700"
              >Requester</label
            >
            <select
              id="requester"
              name="requester"
              class="mt-1 w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500"
            >
              <option value="">-- Select Option --</option>
              <option value="Named Insured">Named Insured</option>
              <option value="Lienholder – SAFE 1 CREDIT UNION">
                Lienholder – SAFE 1 CREDIT UNION
              </option>
              <option value="Other Lienholder">Other Lienholder</option>
              <option value="Other Additional Interest">
                Other Additional Interest
              </option>
              <option value="Spouse">Spouse</option>
              <option value="Other">Other</option>
            </select>
          </div>
          <div id="requesterNameWrapper" class="hidden">
            <label
              for="requester_name"
              class="block text-sm font-medium text-gray-700"
              >Requester Name</label
            >
            <input
              type="text"
              id="requester_name"
              name="requester_name"
              class="mt-1 w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500"
            />
          </div>
        </div>

        <!-- Year -->
        <div id="yearSection" class="hidden">
          <label
            for="00NU700000616UX"
            class="block text-sm font-medium text-gray-700"
            >Year</label
          >
          <input
            type="number"
            id="00NU700000616UX"
            name="00NU700000616UX"
            class="mt-1 block w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500"
          />
        </div>

        <!-- 1st Question: Conversion -->
        <div id="conversionQuestion" class="hidden space-y-3">
          <label class="block font-semibold text-gray-800 text-base">
            Is the vehicle one of the following?
            <span
              class="inline-block bg-purple-600 text-white text-xs font-bold rounded-full w-5 h-5 text-center ml-1 align-middle"
              >?</span
            >
          </label>
          <ul class="list-disc list-inside text-gray-600 space-y-1">
            <li>Van equipped with a conversion package</li>
            <li>Pickup equipped with a conversion package</li>
            <li>SUV equipped with a conversion package</li>
          </ul>
          <div class="mt-3 flex items-center space-x-6">
            <label class="flex items-center space-x-2">
              <input
                type="radio"
                name="conversion_package"
                id="conversion_yes"
                value="yes"
                class="accent-blue-600"
              />
              <span>Yes</span>
            </label>
            <label class="flex items-center space-x-2">
              <input
                type="radio"
                name="conversion_package"
                id="conversion_no"
                value="no"
                class="accent-blue-600"
                checked
              />
              <span>No</span>
            </label>
          </div>
        </div>

        <!-- 2nd Question: Classic/Modified -->
        <div id="classicQuestion" class="hidden space-y-3">
          <label class="block font-semibold text-gray-800 text-base">
            Is the vehicle one of the following?
            <span
              class="inline-block bg-purple-600 text-white text-xs font-bold rounded-full w-5 h-5 text-center ml-1 align-middle"
              >?</span
            >
          </label>
          <ul class="list-disc list-inside text-gray-600 space-y-1">
            <li>Classic, antique or collector's edition</li>
            <li>Registered kit car, customized or other modified vehicle</li>
            <li>Dune buggy, sand rail or baja</li>
          </ul>
          <div class="mt-3 flex items-center space-x-6">
            <label class="flex items-center space-x-2">
              <input
                type="radio"
                name="classic_modified"
                id="classic_yes"
                value="yes"
                class="accent-blue-600"
              />
              <span>Yes</span>
            </label>
            <label class="flex items-center space-x-2">
              <input
                type="radio"
                name="classic_modified"
                id="classic_no"
                value="no"
                class="accent-blue-600"
                checked
              />
              <span>No</span>
            </label>
          </div>
        </div>

        <!-- VIN Question -->
        <div id="vinQuestionSection" class="hidden">
          <label for="know_vin" class="block text-sm font-medium text-gray-700">
            Do you know the VIN of this vehicle?
          </label>
          <input
            type="checkbox"
            id="know_vin"
            name="know_vin"
            value="1"
            class="mt-2 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"
          />
        </div>

        <!-- VIN input -->
        <div id="vinSection" class="hidden">
          <label
            for="00NU700000616Sv"
            class="block text-sm font-medium text-gray-700"
            >VIN Number</label
          >
          <input
            type="text"
            id="00NU700000616Sv"
            name="00NU700000616Sv"
            class="mt-1 w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500"
          />
        </div>

        <!-- Make, Model, Body style -->
        <div id="vehicleDetailsSection" class="hidden space-y-4">
          <div>
            <label
              for="00NU700000616W9"
              class="block text-sm font-medium text-gray-700"
              >Make</label
            >
            <input
              type="text"
              id="00NU700000616W9"
              name="00NU700000616W9"
              class="mt-1 block w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500"
            />
          </div>
          <div>
            <label
              for="00NU700000616Xl"
              class="block text-sm font-medium text-gray-700"
              >Model</label
            >
            <input
              type="text"
              id="00NU700000616Xl"
              name="00NU700000616Xl"
              class="mt-1 block w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500"
            />
          </div>
          <div>
            <label
              for="00NU7000006BJtV"
              class="block text-sm font-medium text-gray-700"
            >
              Body style
            </label>
            <input
              type="text"
              id="00NU7000006BJtV"
              name="00NU7000006BJtV"
              maxlength="255"
              size="20"
              class="mt-1 block w-full p-2 border border-gray-300 rounded-lg shadow-sm focus:ring-blue-500 focus:border-blue-500"
            />
          </div>
        </div>

        <!-- Eligibility Section -->
        <div id="eligibilitySection" class="hidden space-y-3">
          <label class="block font-semibold text-gray-600 text-base">
            Does this vehicle meet the eligibility requirements?
          </label>
          <div class="mt-3 flex flex-col space-y-4">
            <label class="flex items-center space-x-2">
              <input
                type="radio"
                name="eligibility"
                id="eligibility_yes"
                value="yes"
                class="accent-blue-600 h-5 w-5"
              />
              <span class="text-gray-600">Yes, the vehicle is eligible.</span>
            </label>
            <label class="flex items-center space-x-2">
              <input
                type="radio"
                name="eligibility"
                id="eligibility_no"
                value="no"
                class="accent-blue-600 h-5 w-5"
              />
              <span class="text-gray-600">No, the vehicle is ineligible.</span>
            </label>
          </div>
        </div>
        <div
          id="ineligibleMessage"
          class="hidden text-red-600 font-bold text-center"
        >
          We're Unable to Process Your Request
        </div>
      </div>

      <button
        type="submit"
        class="w-full bg-blue-600 text-white font-semibold py-2 px-4 rounded-xl hover:bg-blue-700 transition"
        id="submitBtn"
      >
        Submit
      </button>
    </form>

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        // Field references
        const policyActionSelect = document.getElementById("00NU7000005zuNN");
        const policyNumberInput = document.getElementById("00NU7000005zuX3");
        const agentNameInput = document.getElementById("00NU7000005zsLb");
        const dateInput = document.getElementById("00NU7000005zuLl");
        const requesterSelect = document.getElementById("requester");
        const requesterNameWrapper = document.getElementById(
          "requesterNameWrapper"
        );
        const requesterNameInput = document.getElementById("requester_name");
        const addVehicleSection = document.getElementById("addVehicleSection");

        const yearSection = document.getElementById("yearSection");
        const yearInput = document.getElementById("00NU700000616UX");
        const conversionQuestion =
          document.getElementById("conversionQuestion");
        const conversionYes = document.getElementById("conversion_yes");
        const conversionNo = document.getElementById("conversion_no");
        const classicQuestion = document.getElementById("classicQuestion");
        const classicYes = document.getElementById("classic_yes");
        const classicNo = document.getElementById("classic_no");
        const vinQuestionSection =
          document.getElementById("vinQuestionSection");
        const knowVinCheckbox = document.getElementById("know_vin");
        const vinSection = document.getElementById("vinSection");
        const vinInput = document.getElementById("00NU700000616Sv");
        const vehicleDetailsSection = document.getElementById(
          "vehicleDetailsSection"
        );
        const makeInput = document.getElementById("00NU700000616W9");
        const modelInput = document.getElementById("00NU700000616Xl");
        const bodyStyleInput = document.getElementById("00NU7000006BJtV");
        const eligibilitySection =
          document.getElementById("eligibilitySection");
        const eligibilityYes = document.getElementById("eligibility_yes");
        const eligibilityNo = document.getElementById("eligibility_no");
        const ineligibleMessage = document.getElementById("ineligibleMessage");
        const submitBtn = document.getElementById("submitBtn");

        function isFilled(input) {
          return input && input.value && input.value.trim() !== "";
        }

        function updateVisibleSection() {
          if (policyActionSelect.value === "Add Vehicle") {
            addVehicleSection.classList.remove("hidden");
            showInitialInfo();
          } else {
            addVehicleSection.classList.add("hidden");
          }
        }

        function showInitialInfo() {
          yearSection.classList.add("hidden");
          conversionQuestion.classList.add("hidden");
          classicQuestion.classList.add("hidden");
          vinQuestionSection.classList.add("hidden");
          vinSection.classList.add("hidden");
          vehicleDetailsSection.classList.add("hidden");
          eligibilitySection.classList.add("hidden");
          ineligibleMessage.classList.add("hidden");
        }

        function updateRequesterVisibility() {
          const noRequesterNameNeeded = [
            "Named Insured",
            "Lienholder – SAFE 1 CREDIT UNION",
          ];
          if (
            requesterSelect &&
            !noRequesterNameNeeded.includes(requesterSelect.value) &&
            isFilled(requesterSelect)
          ) {
            requesterNameWrapper.classList.remove("hidden");
          } else {
            requesterNameWrapper.classList.add("hidden");
          }
        }

        function showYearSectionIfReady() {
          if (
            isFilled(policyNumberInput) &&
            isFilled(agentNameInput) &&
            isFilled(dateInput) &&
            isFilled(requesterSelect) &&
            (requesterNameWrapper.classList.contains("hidden") ||
              isFilled(requesterNameInput))
          ) {
            yearSection.classList.remove("hidden");
          } else {
            yearSection.classList.add("hidden");
          }
          if (yearSection.classList.contains("hidden")) {
            conversionQuestion.classList.add("hidden");
            classicQuestion.classList.add("hidden");
            vinQuestionSection.classList.add("hidden");
            vinSection.classList.add("hidden");
            vehicleDetailsSection.classList.add("hidden");
            eligibilitySection.classList.add("hidden");
            ineligibleMessage.classList.add("hidden");
          }
        }

        function showConversionQuestionIfReady() {
          if (isFilled(yearInput)) {
            conversionQuestion.classList.remove("hidden");
          } else {
            conversionQuestion.classList.add("hidden");
            classicQuestion.classList.add("hidden");
            vinQuestionSection.classList.add("hidden");
            vinSection.classList.add("hidden");
            vehicleDetailsSection.classList.add("hidden");
            eligibilitySection.classList.add("hidden");
            ineligibleMessage.classList.add("hidden");
          }
        }

        function handleConversionChange() {
          if (conversionYes.checked) {
            classicQuestion.classList.add("hidden");
            vinQuestionSection.classList.remove("hidden");
            handleVinQuestionVisibility();
          } else {
            classicQuestion.classList.remove("hidden");
            vinQuestionSection.classList.add("hidden");
            vinSection.classList.add("hidden");
            vehicleDetailsSection.classList.add("hidden");
            eligibilitySection.classList.add("hidden");
            ineligibleMessage.classList.add("hidden");
          }
        }

        function handleClassicChange() {
          if (classicYes.checked) {
            vinQuestionSection.classList.remove("hidden");
            handleVinQuestionVisibility();
          } else if (classicNo.checked) {
            vinQuestionSection.classList.remove("hidden");
            handleVinQuestionVisibility();
          }
        }

        function handleVinQuestionVisibility() {
          if (knowVinCheckbox.checked) {
            vinSection.classList.remove("hidden");
            vehicleDetailsSection.classList.add("hidden");
          } else {
            vinSection.classList.add("hidden");
            vehicleDetailsSection.classList.remove("hidden");
          }
          eligibilitySection.classList.remove("hidden");
          ineligibleMessage.classList.add("hidden");
        }

        function handleEligibilityChange() {
          if (eligibilityNo && eligibilityNo.checked) {
            ineligibleMessage.classList.remove("hidden");
            submitBtn.disabled = true;
          } else {
            ineligibleMessage.classList.add("hidden");
            submitBtn.disabled = false;
          }
        }

        policyActionSelect.addEventListener("change", updateVisibleSection);
        [
          policyNumberInput,
          agentNameInput,
          dateInput,
          requesterSelect,
          requesterNameInput,
        ].forEach((input) =>
          input.addEventListener("input", showYearSectionIfReady)
        );
        requesterSelect.addEventListener("change", updateRequesterVisibility);
        yearInput.addEventListener("input", showConversionQuestionIfReady);

        conversionYes.addEventListener("change", function () {
          handleConversionChange();
        });
        conversionNo.addEventListener("change", function () {
          handleConversionChange();
          if (conversionNo.checked) {
            classicQuestion.classList.remove("hidden");
          }
        });

        classicYes.addEventListener("change", handleClassicChange);
        classicNo.addEventListener("change", handleClassicChange);

        knowVinCheckbox.addEventListener("change", handleVinQuestionVisibility);

        eligibilityYes &&
          eligibilityYes.addEventListener("change", handleEligibilityChange);
        eligibilityNo &&
          eligibilityNo.addEventListener("change", handleEligibilityChange);

        updateVisibleSection();
        updateRequesterVisibility();

        document
          .getElementById("mainForm")
          .addEventListener("submit", function (e) {
            let errors = [];
            if (!addVehicleSection.classList.contains("hidden")) {
              if (!isFilled(policyNumberInput))
                errors.push("Policy Number is required.");
              if (!isFilled(agentNameInput))
                errors.push("Agent Name is required.");
              if (!isFilled(dateInput))
                errors.push("Date to add vehicle is required.");
              if (!isFilled(requesterSelect))
                errors.push("Requester is required.");
              if (
                requesterNameWrapper &&
                !requesterNameWrapper.classList.contains("hidden") &&
                !isFilled(requesterNameInput)
              ) {
                errors.push("Requester Name is required.");
              }
              if (
                yearSection &&
                !yearSection.classList.contains("hidden") &&
                !isFilled(yearInput)
              ) {
                errors.push("Year is required.");
              }
              if (
                conversionQuestion &&
                !conversionQuestion.classList.contains("hidden") &&
                !conversionYes.checked &&
                !conversionNo.checked
              ) {
                errors.push(
                  "Please answer if the vehicle has a conversion package."
                );
              }
              if (
                classicQuestion &&
                !classicQuestion.classList.contains("hidden") &&
                !classicYes.checked &&
                !classicNo.checked
              ) {
                errors.push(
                  "Please answer if the vehicle is classic or modified."
                );
              }
              if (
                vinQuestionSection &&
                !vinQuestionSection.classList.contains("hidden") &&
                !knowVinCheckbox.checked &&
                vehicleDetailsSection.classList.contains("hidden")
              ) {
                errors.push("Please specify if you know the VIN.");
              }
              if (
                vinSection &&
                !vinSection.classList.contains("hidden") &&
                !isFilled(vinInput)
              ) {
                errors.push("VIN Number is required.");
              }
              if (
                vehicleDetailsSection &&
                !vehicleDetailsSection.classList.contains("hidden")
              ) {
                if (!isFilled(makeInput)) errors.push("Make is required.");
                if (!isFilled(modelInput)) errors.push("Model is required.");
                if (!isFilled(bodyStyleInput))
                  errors.push("Body style is required.");
              }
              if (
                eligibilitySection &&
                !eligibilitySection.classList.contains("hidden") &&
                !eligibilityYes.checked &&
                !eligibilityNo.checked
              ) {
                errors.push(
                  "Please specify if the vehicle meets eligibility requirements."
                );
              }
              if (eligibilityNo && eligibilityNo.checked) {
                e.preventDefault();
                ineligibleMessage.classList.remove("hidden");
                submitBtn.disabled = true;
                return false;
              }
            }

            if (errors.length > 0) {
              e.preventDefault();
              alert("Please correct the following:\n\n" + errors.join("\n"));
              return false;
            }
            submitBtn.disabled = false;
          });
      });
    </script>
  </body>
</html>
